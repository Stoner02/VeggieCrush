<!doctype html> 
<html lang="en"> 
<head> 
	<meta charset="UTF-8" />
	<title>Veggie Crush</title>

	<script type="text/javascript" src="js/phaser.min.js"></script>
	<script type="text/javascript" src="js/boot.js"></script>
	<script type="text/javascript" src="js/preload.js"></script>
	<script type="text/javascript" src="js/gametitle.js"></script>
	<script type="text/javascript" src="js/main.js"></script>
	<script type="text/javascript" src="js/gameover.js"></script>

	<link rel="stylesheet" type="text/css" href="style.css">
	<script type="text/javascript">
		(function() {

			game = new Phaser.Game('100', '125', Phaser.AUTO, 'game-container');

			//Add all states
			//Adds a new State into the StateManager
			game.state.add("Boot", Boot);
			game.state.add("Preload", Preload);
			game.state.add("GameTitle", GameTitle);
			game.state.add("Main", Main);
			game.state.add("GameOver", GameOver);

			//Start the first state
			game.state.start("Boot");

		})();
	</script>	
</head>

<body> 

	<table id="plateauJeu">
		<tr>
			<!-- *********************** -->
			<!-- Left -->
			<!-- *********************** -->
			<td> 
				
				<!-- *********************** -->
				<!-- Disconnect button -->
				<!-- *********************** -->
				<div id="disconnect">
					<button onclick="disconnect()">Disconnect</button>
				</div>

				<!-- *********************** -->
				<!-- Bonus -->
				<!-- *********************** -->
				<div id="bonus">
					<h2>Bonus: <span id="bonusVal"></span></h2>
				</div>

				<!-- *********************** -->
				<!-- Argent -->
				<!-- *********************** -->
				<div id="money">
					<h2>Argent: <span id="moneyVal">52</span></h2>
				</div>

				<!-- *********************** -->
				<!-- Experience -->
				<!-- *********************** -->
				<div id="exp">
					<h2>Expérience: <span id="expVal">2500014</span></h2>
				</div>

				<!-- *********************** -->
				<!-- Ingrédients -->
				<!-- *********************** -->
				<div id="ingredient">
					<h2>Ingrédients: <span id="ingreVal"></span></h2>
				</div>

				<!-- *********************** -->
				<!-- Potions -->
				<!-- *********************** -->
				<table id="potions">
					<!-- Headers -->
					<th>
						<td>RTS</td> <td>FarmVille</td> <td>MMO</td>
					</th>
					<!-- Potions -->
					<tr>
						<td>Potion1: </td> <td id="rts1"> </td> <td id="ville1"> </td> <td id="mmo1"> </td>
					</tr>
					<tr>
						<td>Potion2: </td> <td id="rts2"> </td> <td id="ville2"> </td> <td id="mmo2"> </td>
					</tr>
					<tr>
						<td>Potion3: </td> <td id="rts3"> </td> <td id="ville3"> </td> <td id="mmo3"> </td>
					</tr>
					<tr>
						<td>Potion4: </td> <td id="rts4"> </td> <td id="ville4"> </td> <td id="mmo4"> </td>
					</tr>
				</table>



			</td>
			<!-- *********************** -->
			<!-- Middle -->
			<!-- *********************** -->
			<td> 
				<div id="game-container"></div>
				
				<div id="message"><p>Vous venez de vendre une potion du chat.</p></div>
			</td>
			<!-- *********************** -->
			<!-- Right -->
			<!-- *********************** -->
			<td> 

				<!-- *********************** -->
				<!-- Vous êtes ici -->
				<!-- *********************** -->
				<div id="position">
					<h2>Vous êtes ici: <span id="valPosition"></span></h2>
				</div>

				<!-- *********************** -->
				<!-- Coordonnées -->
				<!-- *********************** -->
				<form action="/lol.php" id="coord">
					<h2>Coordonnées</h2>
					X:
					<input type="text" name="xCoord" value="">
					Y:
					<input type="text" name="yCoord" value="">
					<input type="submit" value="Go">
				</form> 


				<!-- *********************** -->
				<!-- Villages -->
				<!-- *********************** -->
				<form action="/lol.php" id="village">
					<h2>Villages</h2>
					<select name="village" size="4">
						<option value="volvo">Volvo</option>
						<option value="saab">Saab</option>
						<option value="fiat">Fiat</option>
						<option value="audi">Audi</option>
					</select>
					<input type="submit" value="Go">
				</form>


				<!-- *********************** -->
				<!-- BG -->
				<!-- *********************** -->
				<form action="/lol.php" id="bg">
					<h2>Champ de bataille</h2>
					<select name="bg" size="4">
						<option value="volvo">Volvo</option>
						<option value="saab">Saab</option>
						<option value="fiat">Fiat</option>
						<option value="audi">Audi</option>
					</select>
					<input type="submit" value="Go">
				</form>
				
			</td>
		</tr>
	</table>


	<!-- BEGIN JAVASCRIPT -->
	<script src='https://ajax.googleapis.com/ajax/libs/angularjs/1.4.5/angular.min.js'></script>
	<script src='http://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>
	<script src='https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.6/js/materialize.min.js'></script>
	<script type="text/javascript" src="js/node_modules/socket.io-client/dist/socket.io.js"></script>
	<script type="text/javascript">

		var socket = io.connect();

		var pseudo = "STONER" 	//TODO recup du cookie
		var mdp = "123" 		//TODO recup du cookie
		socket.emit('connectTry', pseudo, mdp);
		
		//-------------------------------------
		// Récupérer toutes les potions
		//-------------------------------------
		socket.emit('getAllPopo');

		//-------------------------------------
		// Met à jour toutes les potions
		//-------------------------------------
		socket.on('receiveAllPopo', function (data) {
			document.getElementById("mmo1").innerHTML = data.mmo1;
			document.getElementById("mmo2").innerHTML = data.mmo2;
			document.getElementById("mmo3").innerHTML = data.mmo3;
			document.getElementById("mmo4").innerHTML = data.mmo4;

			document.getElementById("rts1").innerHTML = data.rts1;
			document.getElementById("rts2").innerHTML = data.rts2;
			document.getElementById("rts3").innerHTML = data.rts3;
			document.getElementById("rts4").innerHTML = data.rts4;

			document.getElementById("ville1").innerHTML = data.ville1;
			document.getElementById("ville2").innerHTML = data.ville2;
			document.getElementById("ville3").innerHTML = data.ville3;
			document.getElementById("ville4").innerHTML = data.ville4;
		});

		//-------------------------------------
		// disconnect client
		//-------------------------------------
		function disconnect() {
			console.log("check");
			socket.emit('userDisconnect');
		} 
	

		//-------------------------------------
		// Connexion réussie
		//-------------------------------------
		socket.on('connecte', function (data) {
			console.log("Connecte.");
		});

		//-------------------------------------
		// Précise l'erreur de connexion
		//-------------------------------------
		socket.on('erreurConnexion', function (data) {
			console.log("Erreur connexion.");
		});
	</script>


</body>

</html>